---
uuid: 105c28f4-bcd3-11ed-abae-3fce2bc8128b
title: APK集成
date: 2022-7-2
tags:
  - Apk
abbrlink: cd5f4916
---

APK集成

<!--more-->

## APK集成
```bash
Android.mk
    LOCAL_PATH := $(call my-dir)
    include $(CLEAR_VARS)
    LOCAL_MODULE := FaceLock
    LOCAL_SRC_FILES := ./FaceLock.apk
    LOCAL_MODULE_TAGS := optional
    LOCAL_MODULE_CLASS := APPS
    LOCAL_CERTIFICATE := PRESIGNED          //表示该apk已经签名过，若修改为platform，就使用系统签名
    LOCAL_OVERRIDES_PACKAGES := Dialer      //覆盖module name，module查看根据源码中的android.mk确定
    LOCAL_MODULE_PATH := $(PRODUCT_OUT)/system/priv-app/
    include $(BUILD_PREBUILT)

添加权限
    frameworks/base/data/etc/privapp-permissions.xml

common.mk
    PRODUCT_PACKAGES += FaceLock
```


## APK直接拷到目录下（`即使不经过签名操作，也会有APK对齐操作`）
`LOCAL_APK_NAME := ApkName`
`LOCAL_POST_PROCESS_COMMAND := $(shell mkdir -p $(TARGET_OUT)/vendor/operator/app/$(LOCAL_APK_NAME) && cp $(LOCAL_PATH)/$(LOCAL_APK_NAME).apk $(TARGET_OUT)/vendor/operator/app/$(LOCAL_APK_NAME)/)`
